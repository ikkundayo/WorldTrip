<%= render 'public/users/map' %>
<div class="container">
  <div class="row justify-content-center">
    <div class="col-md-5">
      <span class="mypage-count">World <%= @country_progress.round(1) %>%</span>
      <h2 class="line"></h2>

      <% if user_signed_in? %>
        <% if @user.id == current_user.id  %>
          <%= link_to new_review_path do %>
            <i class="fa-solid fa-circle-plus mypage-plus"></i>
          <% end %>
        <% end %>
      <% end %>



      <% if @user == current_user %>
        <h1>マイページ</h1>
      <% else %>
        <h1><%= @user.user_name %>さんのページ</h1>
      <% end %>

      <table class='table'>
        <tr><%= image_tag @user.get_user_image(100,100) %><br>
          <i class="flag-icon flag-icon-<%= @user_logo.code.downcase %>"></i>
        </tr>
        <tr>
      	  <th>name</th>
      	  <th><%= @user.user_name %></th>
        </tr>
        <tr>
      	  <th>母国(国旗image)</th>
      	  <th><%= @user.country_code %></th>
        </tr>
        <tr>
      	  <th>Gender</th>
      	  <th><%= @user.gender %></th>
        </tr>
        <tr>
      	  <th>Age</th>
      	  <th><%= @user_age %></th>
        </tr>
        <tr>
      	  <th>Introduction</th>
      	  <th><%= @user.introduction %></th>
        </tr>

        <% if user_signed_in? %>
          <% if @user != current_user %>
            <tr>
          	  <th>
          	    <% if @user.is_followed_by?(current_user) %>
                  <%= link_to user_relationships_path(@user), method: :delete do %>
                    <putton class="btn btn-danger">フォローを外す</putton>
                  <% end %>
                <% else %>
                  <%= link_to user_relationships_path(@user), method: :post do %>
                    <putton class="btn btn-primary">フォロー</putton>
                  <% end %>
                <% end %>
              </th>
            </tr>
          <% end %>
        <% end %>

        <tr>
          <th>following</th>
          <th><%= link_to @user.followers.count, followers_user_path(@user) %></th>
          <th>followers</th>
          <th><%= link_to @user.followeds.count, followed_user_path(@user) %></th>
        </tr>

      </table>
      <div>
        <% if @user == current_user %>
          <%= link_to 'Edit', edit_user_path(current_user) %>
        <% end %>
      </div>
    </div>

    <div class="col-md-5">
      <%= render 'public/reviews/user_ranking', ranking: @ranking, user: @user %>
    </div>
  </div>
</div>

<div class="container">
  <div class="row justify-content-center">
    <div class="col-md-10">
      <%= link_to 'レビュー',user_path(@user, {'type': 'review'}) %><br>
      <%= link_to '思い出',user_path(@user, {'type': 'memory'}), anchor: 'test' %><br>
      <%= link_to 'ヒント',user_path(@user, {'type': 'hint'}) %><br>
      <%= link_to 'いきたい',user_path(@user, {'type': 'like'}) %>
    </div>
  </div>
</div>

<div class="container">
  <div class="row justify-content-center">
    <div class="col-md-6">
      <% if params[:type] == 'hint' %>
        <h2 class="text-center">ヒント一覧</h2>
        <%= render 'public/hints/hint_index', hint: @hint %>
      <% elsif params[:type] == 'memory' %>
        <h2 class="text-center" id="test">思い出一覧</h2>
        <%= render 'public/memories/memory_index', memory: @memory %>
      <% elsif params[:type] == 'like' %>
        <h2 class="text-center">いきたい</h2>
        <%= render 'public/users/like', like: @like %>
      <% else %>
        <h2 class="text-center">マイレビュー一覧</h2>
        <%= render 'public/reviews/review_index', reviews: @review %>
      <% end %>
    </div>
  </div>
</div>
