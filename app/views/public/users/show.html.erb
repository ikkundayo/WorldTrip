<%= render 'public/users/map' %>
<div class="container">
  <div class="row justify-content-center">
    <div class="col-md-4 user-info-box">
      <span class="mypage-count">World <%= @country_progress.round(1) %>%</span>
      <h2 class="line"></h2>

      <% if user_signed_in? %>
        <% if @user == current_user  %>
          <%= link_to new_review_path do %>
            <i class="fa-solid fa-circle-plus mypage-plus"></i>
          <% end %>
        <% end %>
      <% end %>

      <div class='mypage-box'>
        <div>
          <div><i class="flag-icon flag-icon-<%= @user_logo.code.downcase %> mypage-user-icon"></i></div>
          <%= image_tag @user.get_user_image(150,150), class: "mypage-user-img" %>
          <div class="mypage-username">
            <span class="ms-5 me-1"><%= @user.user_name %></span>

            <% if @user.gender == "男" %>
              <i class="fa-solid fa-mars"></i>
            <% elsif @user.gender == "女" %>
              <i class="fa-solid fa-venus"></i>
            <% end %>

            <%= @user_age %>
          </div>
        </div>

        <div class="mypage-introduction-box">
           <%= @user.introduction %>
        </div>

        <div class="follow-box d-flex justify-content-center">
          <div class="following">
            <%= link_to @user.followers.count, followers_user_path(@user) %><br>
            following
          </div>
          <div class="followers">
            <%= link_to @user.followeds.count, followed_user_path(@user) %><br>
            followers
          </div>
        </div>

        <div class="button-box">
          <% if user_signed_in? %>
            <% if @user != current_user %>
        	    <% if @user.is_followed_by?(current_user) %>
                <%= link_to user_relationships_path(@user), method: :delete do %>
                  <putton class="btn btn-danger mypage-button">フォローを外す</putton>
                <% end %>
              <% else %>
                <%= link_to user_relationships_path(@user), method: :post do %>
                  <putton class="btn btn-primary mypage-button">フォロー</putton>
                <% end %>
              <% end %>
            <% else %>
              <%= link_to edit_user_path(current_user) do %>
                <putton class="btn btn-success mypage-button">Edit</putton>
               <% end %>
            <% end %>
          <% end %>
        </div>

      </div>
    </div>

    <div class="col-md-6 user-ranking-box">
      <%= render 'public/reviews/user_ranking', ranking: @ranking, user: @user %>
    </div>
  </div>
</div>

<div class="container">
  <div class="row justify-content-center">
    <div class="col-md-10">
      <%= link_to 'レビュー',user_path(@user, {'type': 'review'}) %><br>
      <%= link_to '思い出',user_path(@user, {'type': 'memory'}), anchor: 'test' %><br>
      <%= link_to 'ヒント',user_path(@user, {'type': 'hint'}) %><br>
      <%= link_to 'いきたい',user_path(@user, {'type': 'like'}) %>
    </div>
  </div>
</div>

<div class="container">
  <div class="row justify-content-center">
    <div class="col-md-6">
      <% if params[:type] == 'hint' %>
        <h2 class="text-center">ヒント一覧</h2>
        <%= render 'public/hints/hint_index', hint: @hint %>
      <% elsif params[:type] == 'memory' %>
        <h2 class="text-center" id="test">思い出一覧</h2>
        <%= render 'public/memories/memory_index', memory: @memory %>
      <% elsif params[:type] == 'like' %>
        <h2 class="text-center">いきたい</h2>
        <%= render 'public/users/like', like: @like %>
      <% else %>
        <h2 class="text-center">マイレビュー一覧</h2>
        <%= render 'public/reviews/review_index', reviews: @review %>
      <% end %>
    </div>
  </div>
</div>
